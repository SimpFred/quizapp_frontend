<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/Quiz.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/Quiz.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useContext, useEffect } from "react";
import { Container, Box } from "@mui/material";
import Question from "../components/Question";
import QuizSetup from "../components/QuizSetup";
import Header from "../components/Header";
import Loading from "../components/helperComponents/Loading";
import Error from "../components/helperComponents/Error";
import QuizResult from "../components/resultComponents/QuizResult";
import { QuizAppContext } from "../context";

/**
 * Quiz Component
 *
 * This component manages the quiz flow, including fetching questions, displaying the quiz setup,
 * handling errors, and showing the quiz results. It uses the QuizAppContext to manage state.
 *
 * @component
 * @example
 * // To use the Quiz component, ensure that it is wrapped within the QuizAppProvider
 * // and that the QuizAppContext contains the necessary state and functions.
 * return (
 *   &lt;QuizAppProvider>
 *     &lt;Quiz />
 *   &lt;/QuizAppProvider>
 * )
 *
 * @returns {JSX.Element} The quiz component with different states (setup, loading, error, question, result).
 */
function Quiz() {
  const {
    questions,
    setQuestions,
    hasFetched,
    setHasFetched,
    error,
    setError,
    isFinished,
    quizSetup,
  } = useContext(QuizAppContext);

  /**
   * useEffect hook to fetch quiz questions when the quiz setup changes
   * and questions have not been fetched yet.
   */
  useEffect(() => {
    if (quizSetup &amp;&amp; !hasFetched) {
      fetch(
        `http://localhost:8080/api/quiz/questions?amount=${quizSetup.numQuestions}&amp;category=${quizSetup.category}&amp;difficulty=${quizSetup.difficulty}`
      )
        .then((response) => {
          if (!response.ok) {
            throw new Error("Network response was not ok");
          }
          return response.json();
        })
        .then((data) => {
          setQuestions(data.results || data);
          setHasFetched(true);
        })
        .catch((error) =>
          setError("Failed to fetch quiz questions, please try again later.")
        );
    }
  }, [quizSetup, hasFetched]);

  // If quiz setup is not defined, show the quiz setup component
  if (!quizSetup) {
    return (
      &lt;>
        &lt;Header />
        &lt;QuizSetup />
      &lt;/>
    );
  }

  // If there is an error, show the error component
  if (error) {
    return (
      &lt;>
        &lt;Header />
        &lt;Error />
      &lt;/>
    );
  }

  // If the quiz is finished, show the quiz result component
  if (isFinished) {
    return (
      &lt;>
        &lt;Header />
        &lt;QuizResult />
      &lt;/>
    );
  }

  // If questions are still being fetched, show the loading component
  if (questions.length === 0) {
    return (
      &lt;>
        &lt;Header />
        &lt;Loading />
      &lt;/>
    );
  }

  // Show the current question
  return (
    &lt;>
      &lt;Header />
      &lt;Container maxWidth="lg">
        &lt;Box
          sx={{
            mt: 6,
            mb: 6,
            p: 3,
            boxShadow: 3,
            borderRadius: 2,
            bgcolor: "background.paper",
          }}
        >
          &lt;Question />
        &lt;/Box>
      &lt;/Container>
    &lt;/>
  );
}

export default Quiz;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#Error">Error</a></li><li><a href="global.html#Loading">Loading</a></li><li><a href="global.html#Question">Question</a></li><li><a href="global.html#Quiz">Quiz</a></li><li><a href="global.html#QuizAppContext">QuizAppContext</a></li><li><a href="global.html#QuizAppProvider">QuizAppProvider</a></li><li><a href="global.html#QuizResult">QuizResult</a></li><li><a href="global.html#QuizSetup">QuizSetup</a></li><li><a href="global.html#Result">Result</a></li><li><a href="global.html#SaveResults">SaveResults</a></li><li><a href="global.html#Scoreboard">Scoreboard</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Wed Oct 09 2024 14:26:14 GMT+0200 (centraleuropeisk sommartid)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
